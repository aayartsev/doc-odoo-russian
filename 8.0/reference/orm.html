<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ORM API &mdash; перевод на русский язык документации odoo 8.0</title>

    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/patchqueue.css" type="text/css" />

    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <link rel="top" title="перевод на русский язык документации odoo 8.0" href="../index.html" />
    <link rel="up" title="Reference" href="../reference.html" />
    <link rel="next" title="Data Files" href="./data.html" />
    <link rel="prev" title="Reference" href="../reference.html" />
</head>

<body role="document">
    <header class="">
        <figure class="card top">
            <span class="card-img" style="background-image: url('./_static/banners/orm_api.jpg');"></span>
        </figure>
    </header>
    <nav id="main_navbar" class="navbar ">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-main">
                    <span class="sr-only">Навигация</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <nav class="nav navbar-nav navbar-left">
                    <li id="main-back">
                        <a href="./index.html" class="mdi-navigation-arrow-back"></a>
                    </li>
                    <li>
                        <h1 id="main_title">ORM API</h1>
                    </li>
                </nav>
            </div>

            <nav class="collapse navbar-collapse navbar-main navbar-right" role="navigation">

                <ul class="navbar-nav navbar-right nav">
                    <li class="versions">
                        <a class="dropdown-toggle" data-toggle="dropdown">
                8.0 <span class="caret"></span>
              </a>
                        <ul class="dropdown-menu" role="menu">

                            <li><a href="https://www.odoo.com/documentation/9.0/reference/orm.html">9.0</a></li>

                        </ul>
                    </li>
                </ul>

                <ul class="current navbar-nav navbar-right nav">
                    <li class="toctree-l1 current dropdown"><a data-toggle="dropdown" href="./tutorials.html" class="dropdown-toggle internal reference">Руководства</a>
                        <ul class="current dropdown-menu">
                            <li class="toctree-l2"><a href="../howtos/themes.html" class="internal reference">Создание своей темы</a></li>
                            <li class="toctree-l2"><a href="../howtos/website.html" class="internal reference">Создание вебсайта</a></li>
                            <li class="toctree-l2"><a href="../howtos/backend.html" class="current internal reference">Создание модуля</a></li>
                            <li class="toctree-l2"><a href="./howtos/web.html" class="internal reference">Создание расширений для интерфейса</a></li>
                        </ul>
                    </li>
                    <li class="toctree-l1"><a href="./api_integration.html" class="internal reference">Web Service API</a>
                        <ul></ul>
                    </li>
                    <li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="./setup.html" class="dropdown-toggle internal reference">Настройка</a>
                        <ul class="dropdown-menu">
                            <li class="toctree-l2"><a href="../setup/install.html" class="internal reference">Установка Odoo</a></li>
                            <li class="toctree-l2"><a href="../setup/deploy.html" class="internal reference">Развертывание Odoo</a></li>
                        </ul>
                    </li>
                    <li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="./reference.html" class="dropdown-toggle internal reference">Справка</a>
                        <ul class="dropdown-menu">
                            <li class="toctree-l2"><a href="" class="internal reference">ORM API</a></li>
                            <li class="toctree-l2"><a href="../reference/data.html" class="internal reference">Файлы с данными</a></li>
                            <li class="toctree-l2"><a href="../reference/actions.html" class="internal reference">Действия</a></li>
                            <li class="toctree-l2"><a href="../reference/views.html" class="internal reference">Представления</a></li>
                            <li class="toctree-l2"><a href="../reference/module.html" class="internal reference">Модули</a></li>
                            <li class="toctree-l2"><a href="../reference/cmdline.html" class="internal reference">Интерфейс коммандной строки: odoo.py</a></li>
                            <li class="toctree-l2"><a href="../reference/security.html" class="internal reference">Безопасность в Odoo</a></li>
                            <li class="toctree-l2"><a href="../reference/testing.html" class="internal reference">Тестирование модулей</a></li>
                            <li class="toctree-l2"><a href="../reference/http.html" class="internal reference">Web Controllers</a></li>
                            <li class="toctree-l2"><a href="../reference/qweb.html" class="internal reference">QWeb</a></li>
                            <li class="toctree-l2"><a href="../reference/javascript.html" class="internal reference">Javascript</a></li>
                            <li class="toctree-l2"><a href="../reference/translations.html" class="internal reference">Перевод Модулей</li>
                            <li class="toctree-l2"><a href="../reference/reports.html" class="internal reference">Печатные формы(Отчеты) на QWeb</a></li>
                            <li class="toctree-l2"><a href="../reference/workflows.html" class="internal reference">Бизнес-процессы</a></li>
                            <li class="toctree-l2"><a href="../reference/guidelines.html" class="internal reference">Методические рекомендации по Odoo</a></li>
                            <li class="toctree-l2"><a href="../reference/upgrade_api.html" class="internal reference">API для обновления</a></li>
                        </ul>
                    </li>
                    <li class="toctree-l1 dropdown"><a data-toggle="dropdown" href="./business.html" class="dropdown-toggle internal reference">Business Mementoes</a>
                        <ul class="dropdown-menu">
                            <li class="toctree-l2"><a href="https://odoo.com/documentation/functional/accounting.html" class="external reference">Accounting Memento (US GAAP)</a></li>
                            <li class="toctree-l2"><a href="https://odoo.com/documentation/functional/double-entry.html" class="external reference">Double-Entry Inventory</a></li>
                            <li class="toctree-l2"><a href="https://odoo.com/documentation/functional/valuation.html" class="external reference">Inventory Valuations</a></li>
                        </ul>
            </nav>
        </div>
    </nav>


    <main class="container ">

        <div class="row">

            <aside>
                <div class="navbar-aside text-center">
                    <div class="logo_box">
                        <span class="logo"></span> Документация
                    </div>
                    <ul class="list-group text-left nav">
                        <li class="list-group-item"><a href="#recordsets" class="ripple internal reference">Наборы записей</a>
                            <ul>
                                <li class="list-group-item"><a href="#field-access" class="ripple internal reference">Доступ к полям</a></li>
                                <li class="list-group-item"><a href="#set-operations" class="ripple internal reference">Set operations</a></li>
                                <li class="list-group-item"><a href="#other-recordset-operations" class="ripple internal reference">Other recordset operations</a></li>
                            </ul>
                        </li>
                        <li class="list-group-item"><a href="#environment" class="ripple internal reference">Окружение</a>
                            <ul>
                                <li class="list-group-item"><a href="#altering-the-environment" class="ripple internal reference">Altering the environment</a></li>
                            </ul>
                        </li>
                        <li class="list-group-item"><a href="#common-orm-methods" class="ripple internal reference">Common ORM methods</a></li>
                        <li class="list-group-item"><a href="#creating-models" class="ripple internal reference">Создание моделей данных</a>
                            <ul>
                                <li class="list-group-item"><a href="#computed-fields" class="ripple internal reference">Вычисляемые поля</a>
                                    <ul>
                                        <li class="list-group-item"><a href="#related-fields" class="ripple internal reference">Related fields</a></li>
                                    </ul>
                                </li>
                                <li class="list-group-item"><a href="#onchange-updating-ui-on-the-fly" class="ripple internal reference">onchange: обновление UI на лету</a></li>
                                <li class="list-group-item"><a href="#low-level-sql" class="ripple internal reference">Низкоуровневый SQL</a></li>
                            </ul>
                        </li>
                        <li class="list-group-item"><a href="#compatibility-between-new-api-and-old-api" class="ripple internal reference">Compatibility between new API and old API</a></li>
                        <li class="list-group-item"><a href="#model-reference" class="ripple internal reference">Model Reference</a></li>
                        <li class="list-group-item"><a href="#module-openerp.api" class="ripple internal reference">Method decorators</a></li>
                        <li class="list-group-item"><a href="#fields" class="ripple internal reference">Поля</a>
                            <ul>
                                <li class="list-group-item"><a href="#basic-fields" class="ripple internal reference">Basic fields</a></li>
                                <li class="list-group-item"><a href="#relational-fields" class="ripple internal reference">Relational fields</a></li>
                            </ul>
                        </li>
                        <li class="list-group-item"><a href="#inheritance-and-extension" class="ripple internal reference">
Наследование и расширение</a>
                            <ul>
                                <li class="list-group-item"><a href="#classical-inheritance" class="ripple internal reference">Classical inheritance</a></li>
                                <li class="list-group-item"><a href="#extension" class="ripple internal reference">Extension</a></li>
                                <li class="list-group-item"><a href="#delegation" class="ripple internal reference">Delegation</a></li>
                            </ul>
                        </li>
                        <li class="list-group-item"><a href="#domains" class="ripple internal reference">Domains</a></li>
                        <li class="list-group-item"><a href="#porting-from-the-old-api-to-the-new-api" class="ripple internal reference">Porting from the old API to the new API</a>
                            <ul>
                                <li class="list-group-item"><a href="#automatic-bridging-of-old-api-methods" class="ripple internal reference">Automatic bridging of old API methods</a></li>
                            </ul>
                        </li>
                    </ul>

                    <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/8.0/doc/reference/orm.rst" class="gith-link">
              Доступно на GitHub
          </a></p>

                </div>
            </aside>

            <article class="doc-body ">


                <section id="orm-api"><i id="reference-orm"></i></section>
                <section id="recordsets">
                    <h2>Наборы (сеты) записей</h2>
                    <div class="versionadded">
                        <p><span class="versionmodified">Новое в версии 8.0: </span>Данная страница описывает новый API для Odoo 8.0, который будет основным API в дальнейшем. Здесь так же есть информация о переносе или "пробросе" со &quot;старого API&quot;
                            версии 7 или более ранней, но здесь вы не найдете детальную информацию по старому API. Для этого смотрите старую документацию.</p>
                    </div>
                    <p>Взаимодействие с моделями данных и записями осуществляется через наборы записей, записи одной модели данных сортируются в соотвествующие наборы.</p>
                    <div role="alert" class="alert-warning alert">
                        <p class="alert-title">Внимание</p>
                        <p>вопреки логике следующей из названия, в настоящий момент набор записей может содержать дубликаты. В будущем это может измениться</p>
                    </div>
                    <p>Методы определенные на модели данных исполняются на наборе записей и их <code>self</code> и есть набор записей:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;a.model&#39;</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># self может быть где угодно между 0 записей и всеми записями в</span>
        <span class="c"># базе данных</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_operation</span><span class="p">()</span>
</pre></div>
                    </div>
                    <p>Перебор набора записей возвратит новые наборы записей с <em>единственной записью</em> (&quot;синглеты&quot;), точно так же как перебор в Python строки возвратит строки состоящие из одного символа:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="k">def</span> <span class="nf">do_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">print</span> <span class="bp">self</span> <span class="c"># =&gt; a.model(1, 2, 3, 4, 5)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">record</span> <span class="c"># =&gt; a.model(1), then a.model(2), then a.model(3), ...</span>
</pre></div>
                    </div>
                </section>
                <section id="field-access">
                    <h3>Доступ к полям</h3>
                    <p>Наборы записей обеспечивают &quot;Active Record&quot; интерфейс: поля в модели данных могут быть прочитаны и записаны прямо из записи, но только для синглета (набор записей состоящий из одной записи). Изменение значения поля иницииирует
                        апдейт в базе данных:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span>
<span class="go">Example Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">company_id</span><span class="o">.</span><span class="n">name</span>
<span class="go">Company Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Bob&quot;</span>
</pre></div>
                    </div>
                    <p>Попытка прочитать или записать поле во множество записей возвратит ошибку.</p>
                    <p>Обращение к реляционному полю (<a href="#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>,
                        <a href="#openerp.fields.One2many" class="internal reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>,
                        <a href="#openerp.fields.Many2many" class="internal reference" title="openerp.fields.Many2many"><code class="py xref py-class">Many2many</code></a>)
                        <em>всегда</em> возвращает набор записей, пустой в том случае, если поле на назначено.</p>
                    <div role="alert" class="alert-danger alert">
                        <p class="alert-title">Осторожно</p>
                        <p>каждое назначение для поля инициирует апдейт базы данных, когда изменяются несколько полей единовременно или изменяются поля в нескольких записях (на одно и то же значение), используется метод <a href="#openerp.models.Model.write"
                                class="internal alert-link reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a>:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="c"># 3 * len(records) апдейта в базе данных</span>
<span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
    <span class="n">record</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">record</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">record</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c"># len(records) апдейт в базе данных</span>
<span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
    <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

<span class="c"># 1 апдейт в базе данных</span>
<span class="n">records</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</pre></div>
                        </div>
                    </div>
                </section>
                <section id="set-operations">
                    <h3>Операции с набором записей</h3>
                    <p>Наборы неизменны, но наборы одной и той же модели данны могут быть объеденены используя различныне наборы операций, возвращающие новые наборы записей. Набор операций <em>не устанавливает</em> порядок.</p>
                    <ul>
                        <li><code>record in set</code> возвращает <code>record</code> (которая будет 1-элементным набором записей) которя находится в <code>set</code>. <code>record not in set</code> обратная операция
                        </li>
                        <li><code>set1 | set2</code> возвращает объединение из двух наборов записей, новый набор записей содержит все записи из обоих источников</li>
                        <li><code>set1 &amp; set2</code> возвращает пересечение из двух наборов записей, новый набор записей содержит только те записи, которые существуют в обеих источниках</li>
                        <li><code>set1 - set2</code> возвращает новый набор записей, содержвщий только записи <code>set1</code>, которые <em>не входят</em> в <code>set2</code></li>
                    </ul>
                </section>
                <section id="other-recordset-operations">
                    <h3>Другие операции с наборами записей</h3>
                    <p>Наборы записей являются итерируемым, поэтому обычные иструменты Python позволяют проводить различные преобразоывания (<a href="https://docs.python.org/2/library/functions.html#map" class="external reference" title="(in Python v2.7)"><code >map()</code></a>, <a href="https://docs.python.org/2/library/functions.html#sorted"
                            class="external reference" title="(in Python v2.7)"><code >sorted()</code></a>,
                        <a href="https://docs.python.org/2/library/itertools.html#itertools.ifilter" class="external reference" title="(in Python v2.7)"><code class="py xref py-func">ifilter()</code></a>, ...) однако их испхользование возвращает
                        <a href="https://docs.python.org/2/library/functions.html#list" class="external reference" title="(in Python v2.7)"><code >list</code></a> или <a href="https://docs.python.org/2/glossary.html#term-iterator" class="external reference"
                            title="(in Python v2.7)"><span >iterator</span></a>, удаляя возможность вызывать метод к получившемуся результату, или использовать набор операций.</p>
                    <p>В связи с этим наборы записей предоставляют эти операции, которые возращают эти же наборы записей (в тех случаях, когда это возможно):</p>
                    <dl><dt><a href="#openerp.models.Model.filtered" class="internal reference" title="openerp.models.Model.filtered"><code class="py py-meth xref">filtered()</code></a></dt>
                        <dd>
                            <p>возвращает набор записей, который содержит только записи удовлетворяющие условиям предикат функции. Предикат так, же может иметь строковое значение для фильтрации если поле имеет значение True или False:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># оставляет только те записи, чьи пользователи принадлежат компании</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">company_id</span> <span class="o">==</span> <span class="n">user</span><span class="o">.</span><span class="n">company_id</span><span class="p">)</span>

<span class="c"># оставляет только те записи, где партнер это компания (юридическое лицо)</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="s">&quot;partner_id.is_company&quot;</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.sorted" class="internal reference" title="openerp.models.Model.sorted"><code class="py py-meth xref">sorted()</code></a></dt>
                        <dd>
                            <p>возвращает набор записей, отсортированных по ключу фукнции. Если не предоставлено ни одного ключа, используется порядок сортировки по умолчанию текущей модели данных:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># сортрирует записи по имени</span>
<span class="n">records</span><span class="o">.</span><span class="n">sorted</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.mapped" class="internal reference" title="openerp.models.Model.mapped"><code class="py py-meth xref">mapped()</code></a></dt>
                        <dd>
                            <p>применяет предоставленную функцию к каждой записи в наборе и возвращает набор записей, если таковой получается по результату работы функции:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># возвращает список сумм двух полей для каждой записи в наборе</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">field1</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">field2</span><span class="p">)</span>
</pre></div>
                            </div>
                            <p>Предоставленная фукнция может быть и строкой, для того чтобы получить значения полей:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># возвращает список имен</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>

<span class="c"># возвращает наборе записей партнеров</span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c"># возвращает объединение всех банков партнера с удаленными дубликатами </span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s">&#39;partner_id.bank_ids&#39;</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd>
                    </dl>
                </section>
                <section id="environment">
                    <h2>Окружение</h2>
                    <p><code class="py xref py-class">Окружение</code> хранит различные контекстные данные, используемые в ORM: курсор базы данных (для запросов к базе), значение текущего пользователя (для проверки прав доступа) и текущий контекст (для хранения произвольных метаданных).
                      Окружение так же имеет кэш.</p>
                    <p>Все наборы записей имеют свое окружение, которое не изменно, может быть использовано с помощью <code class="py xref py-attr">env</code> и предоставлению текущему пользователю (
                        <code class="py xref py-attr">user</code>), курсора (
                        <code class="py xref py-attr">cr</code>) или контекста (
                        <code class="py xref py-attr">context</code>):</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span>
<span class="go">&lt;Environment object ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">user</span>
<span class="go">res.user(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span>
<span class="go">&lt;Cursor object ...)</span>
</pre></div>
                    </div>
                    <p>When creating a recordset from an other recordset, the environment is inherited. The environment can be used to get an empty recordset in an other model, and query that model:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span>
<span class="go">res.partner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">([[</span><span class="s">&#39;is_company&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;customer&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">]])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
</pre></div>
                    </div>
                </section>
                <section id="altering-the-environment">
                    <h3>Altering the environment</h3>
                    <p>The environment can be customized from a recordset. This returns a new version of the recordset using the altered environment.</p>
                    <dl><dt><a href="#openerp.models.Model.sudo" class="internal reference" title="openerp.models.Model.sudo"><code class="py py-meth xref">sudo()</code></a></dt>
                        <dd>
                            <p>creates a new environment with the provided user set, uses the administrator if none is provided (to bypass access rights/rules in safe contexts), returns a copy of the recordset it is called on using the new environment:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># create partner object as administrator</span>
<span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sudo</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;A Partner&quot;</span><span class="p">})</span>

<span class="c"># list partners visible by the &quot;public&quot; user</span>
<span class="n">public</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="s">&#39;base.public_user&#39;</span><span class="p">)</span>
<span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sudo</span><span class="p">(</span><span class="n">public</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">([])</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.with_context" class="internal reference" title="openerp.models.Model.with_context"><code class="py py-meth xref">with_context()</code></a></dt>
                        <dd>
                            <ol>
                                <li>can take a single positional parameter, which replaces the current environment's context</li>
                                <li>can take any number of parameters by keyword, which are added to either the current environment's context or the context set during step 1</li>
                            </ol>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># look for partner, or create one with specified timezone if none is</span>
<span class="c"># found</span>
<span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">a_tz</span><span class="p">)</span><span class="o">.</span><span class="n">find_or_create</span><span class="p">(</span><span class="n">email_address</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.with_env" class="internal reference" title="openerp.models.Model.with_env"><code class="py py-meth xref">with_env()</code></a></dt>
                        <dd>replaces the existing environment entirely</dd>
                    </dl>
                </section>
                <section id="common-orm-methods">
                    <h2>Common ORM methods</h2>
                    <dl><dt><a href="#openerp.models.Model.search" class="internal reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a></dt>
                        <dd>
                            <p>Takes a <a href="#reference-orm-domains" class="internal reference"><span >search domain</span></a>, returns a recordset of matching records. Can return a subset of matching records (<code>offset</code> and <code>limit</code>                                parameters) and be ordered (<code>order</code> parameter):</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># searches the current model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([(</span><span class="s">&#39;is_company&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;customer&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([(</span><span class="s">&#39;is_company&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Agrolait&#39;</span>
</pre></div>
                            </div>
                            <div role="alert" class="alert-info alert">
                                <p class="alert-title">Tip</p>
                                <p>to just check if any record matches a domain, or count the number of records which do, use
                                    <a href="#openerp.models.Model.search_count" class="internal alert-link reference" title="openerp.models.Model.search_count"><code class="py py-meth xref">search_count()</code></a></p>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.create" class="internal reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a></dt>
                        <dd>
                            <p>Takes a number of field values, and returns a recordset containing the record created:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;New Name&quot;</span><span class="p">})</span>
<span class="go">res.partner(78)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.write" class="internal reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a></dt>
                        <dd>
                            <p>Takes a number of field values, writes them to all the records in its recordset. Does not return anything:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;Newer Name&quot;</span><span class="p">})</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.browse" class="internal reference" title="openerp.models.Model.browse"><code class="py py-meth xref">browse()</code></a></dt>
                        <dd>
                            <p>Takes a database id or a list of ids and returns a recordset, useful when record ids are obtained from outside Odoo (e.g. round-trip through external system) or <a href="#reference-orm-oldapi" class="internal reference"><span >when calling methods in the old API</span></a>:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="go">res.partner(7, 18, 12)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.exists" class="internal reference" title="openerp.models.Model.exists"><code class="py py-meth xref">exists()</code></a></dt>
                        <dd>
                            <p>Returns a new recordset containing only the records which exist in the database. Can be used to check whether a record (e.g. obtained externally) still exists:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;The record has been deleted&quot;</span><span class="p">)</span>
</pre></div>
                            </div>
                            <p>or after calling a method which could have removed some records:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">records</span><span class="o">.</span><span class="n">may_remove_some</span><span class="p">()</span>
<span class="c"># only keep records which were not deleted</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>
                            </div>
                        </dd><dt><code class="py py-meth xref">ref()</code></dt>
                        <dd>
                            <p>Environment method returning the record matching a provided
                                <a href="./glossary.html#term-external-id" class="internal reference"><span class="std std-term xref">external id</span></a>:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="s">&#39;base.group_public&#39;</span><span class="p">)</span>
<span class="go">res.groups(2)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.models.Model.ensure_one" class="internal reference" title="openerp.models.Model.ensure_one"><code class="py py-meth xref">ensure_one()</code></a></dt>
                        <dd>
                            <p>checks that the recordset is a singleton (only contains a single record), raises an error otherwise:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">records</span><span class="o">.</span><span class="n">ensure_one</span><span class="p">()</span>
<span class="c"># is equivalent to but clearer than:</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Expected singleton&quot;</span>
</pre></div>
                            </div>
                        </dd>
                    </dl>
                </section>
                <section id="creating-models">
                    <h2>Creating Models</h2>
                    <p>Model fields are defined as attributes on the model itself:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span>
<span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;a.model.name&#39;</span>

    <span class="n">field1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>
</pre></div>
                    </div>
                    <div role="alert" class="alert-warning alert">
                        <p class="alert-title">Warning</p>
                        <p>this means you can not define a field and a method with the same name, they will conflict</p>
                    </div>
                    <p>By default, the field's label (user-visible name) is a capitalized version of the field name, this can be overridden with the <code>string</code> parameter:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">field2</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&quot;an other field&quot;</span><span class="p">)</span>
</pre></div>
                    </div>
                    <p>For the various field types and parameters, see <a href="#reference-orm-fields" class="internal reference"><span >the fields reference</span></a>.</p>
                    <p>Default values are defined as parameters on fields, either a value:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">a_field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&quot;a value&quot;</span><span class="p">)</span>
</pre></div>
                    </div>
                    <p>or a function called to compute the default value, which should return that value:
                    </p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">a_field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">compute_default_value</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">compute_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
</pre></div>
                    </div>
                </section>
                <section id="computed-fields">
                    <h3>Computed fields</h3>
                    <p>Fields can be computed (instead of read straight from the database) using the
                        <code>compute</code> parameter. <strong>It must assign the computed value to the field</strong>. If it uses the values of other <em>fields</em>, it should specify those fields using
                        <a href="#openerp.api.depends" class="internal reference" title="openerp.api.depends"><code class="py xref py-func">depends()</code></a>:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">api</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_compute_total&#39;</span><span class="p">)</span>

<span class="nd">@api.depends</span><span class="p">(</span><span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="s">&#39;tax&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">tax</span>
</pre></div>
                    </div>
                    <ul>
                        <li>
                            <p>dependencies can be dotted paths when using sub-fields:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="nd">@api.depends</span><span class="p">(</span><span class="s">&#39;line_ids.value&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">line_ids</span><span class="p">)</span>
</pre></div>
                            </div>
                        </li>
                        <li>computed fields are not stored by default, they are computed and returned when requested. Setting <code>store=True</code> will store them in the database and automatically enable searching</li>
                        <li>
                            <p>searching on a computed field can also be enabled by setting the <code>search</code> parameter. The value is a method name returning a
                                <a href="#reference-orm-domains" class="internal reference"><span >Domains</span></a>:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">upper_name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_compute_upper&#39;</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
                            </div>
                        </li>
                        <li>
                            <p>to allow <em>setting</em> values on a computed field, use the <code>inverse</code> parameter. It is the name of a function reversing the computation and setting the relevant fields:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">document</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_get_document&#39;</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="s">&#39;_set_document&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_get_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">document</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">_set_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">())</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">)</span>
</pre></div>
                            </div>
                        </li>
                        <li>
                            <p>multiple fields can be computed at the same time by the same method, just use the same method on all fields and set all of them:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">discount_value</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_apply_discount&#39;</span><span class="p">)</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_apply_discount&#39;</span><span class="p">)</span>

<span class="nd">@depends</span><span class="p">(</span><span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="s">&#39;discount&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_apply_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="c"># compute actual discount from discount percentage</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">discount</span>
</pre></div>
                            </div>
                        </li>
                    </ul>
                </section>
                <section id="related-fields">
                    <h4>Related fields</h4>
                    <p>A special case of computed fields are <em>related</em> (proxy) fields, which provide the value of a sub-field on the current record. They are defined by setting the <code>related</code> parameter and like regular computed fields they
                        can be stored:
                    </p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">nickname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">related</span><span class="o">=</span><span class="s">&#39;user_id.partner_id.name&#39;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
                    </div>
                </section>
                <section id="onchange-updating-ui-on-the-fly">
                    <h3>onchange: updating UI on the fly</h3>
                    <p>When a user changes a field's value in a form (but hasn't saved the form yet), it can be useful to automatically update other fields based on that value e.g. updating a final total when the tax is changed or a new invoice line is added.
                    </p>
                    <ul>
                        <li>computed fields are automatically checked and recomputed, they do not need an <code>onchange</code></li>
                        <li>
                            <p>for non-computed fields, the <a href="#openerp.api.onchange" class="internal reference" title="openerp.api.onchange"><code class="py xref py-func">onchange()</code></a> decorator is used to provide new field values:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="nd">@api.onchange</span><span class="p">(</span><span class="s">&#39;field1&#39;</span><span class="p">,</span> <span class="s">&#39;field2&#39;</span><span class="p">)</span> <span class="c"># if these fields are changed, call method</span>
<span class="k">def</span> <span class="nf">check_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field1</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">field2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field3</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
                            </div>
                            <p>the changes performed during the method are then sent to the client program and become visible to the user</p>
                        </li>
                        <li>Both computed fields and new-API onchanges are automatically called by the client without having to add them in views</li>
                        <li>
                            <p>It is possible to suppress the trigger from a specific field by adding
                                <code>on_change=&quot;0&quot;</code> in a view:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre>&lt;field name=&quot;name&quot; on_change=&quot;0&quot;/&gt;
</pre></div>
                            </div>
                            <p>will not trigger any interface update when the field is edited by the user, even if there are function fields or explicit onchange depending on that field.
                            </p>
                        </li>
                    </ul>
                    <div role="alert" class="alert-info alert">
                        <p class="alert-title">Note</p>
                        <p><code>onchange</code> methods work on virtual records assignment on these records is not written to the database, just used to know which value to send back to the client</p>
                    </div>
                </section>
                <section id="low-level-sql">
                    <h3>Low-level SQL</h3>
                    <p>The <code class="py xref py-attr">cr</code> attribute on environments is the cursor for the current database transaction and allows executing SQL directly, either for queries which are difficult to express using the ORM (e.g. complex
                        joins) or for performance reasons:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;some_sql&quot;</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">)</span>
</pre></div>
                    </div>
                    <p>Because models use the same cursor and the <code class="py xref py-class">Environment</code> holds various caches, these caches must be invalidated when <em>altering</em> the database in raw SQL, or further uses of models may become
                        incoherent. It is necessary to clear caches when using <code>CREATE</code>, <code>UPDATE</code> or <code>DELETE</code> in SQL, but not <code>SELECT</code> (which simply reads the database).</p>
                    <p>Clearing caches can be performed using the
                        <code class="py py-meth xref">invalidate_all()</code> method of the
                        <code class="py xref py-class">Environment</code> object.</p>
                </section>
                <section id="compatibility-between-new-api-and-old-api"><i id="reference-orm-oldapi"></i>
                    <h2>Compatibility between new API and old API</h2>
                    <p>Odoo is currently transitioning from an older (less regular) API, it can be necessary to manually bridge from one to the other manually:</p>
                    <ul>
                        <li>RPC layers (both XML-RPC and JSON-RPC) are expressed in terms of the old API, methods expressed purely in the new API are not available over RPC</li>
                        <li>overridable methods may be called from older pieces of code still written in the old API style</li>
                    </ul>
                    <p>The big differences between the old and new APIs are:</p>
                    <ul>
                        <li>values of the <code class="py xref py-class">Environment</code> (cursor, user id and context) are passed explicitly to methods instead</li>
                        <li>record data (<a href="#openerp.models.Model.ids" class="internal reference" title="openerp.models.Model.ids"><code class="py xref py-attr">ids</code></a>) are passed explicitly to methods, and possibly not passed at all</li>
                        <li>methods tend to work on lists of ids instead of recordsets</li>
                    </ul>
                    <p>By default, methods are assumed to use the new API style and are not callable from the old API style.</p>
                    <div role="alert" class="alert-info aphorism alert">
                        <p class="alert-title">Tip</p>
                        <p>calls from the new API to the old API are bridged</p>
                        <p>when using the new API style, calls to methods defined using the old API are automatically converted on-the-fly, there should be no need to do anything special:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># method in the old API style</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">old_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">print</span> <span class="n">ids</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># method in the new API style</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">new_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c"># system automatically infers how to call the old-style</span>
<span class="gp">... </span>    <span class="c"># method from the new-style method</span>
<span class="gp">... </span>    <span class="bp">self</span><span class="o">.</span><span class="n">old_method</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="p">[</span><span class="n">model</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">new_method</span><span class="p">()</span>
<span class="go">[1, 2, 3, 4]</span>
</pre></div>
                        </div>
                    </div>
                    <p>Two decorators can expose a new-style method to the old API:</p>
                    <dl><dt><a href="#openerp.api.model" class="internal reference" title="openerp.api.model"><code class="py xref py-func">model()</code></a></dt>
                        <dd>
                            <p>the method is exposed as not using ids, its recordset will generally be empty. Its &quot;old API&quot; signature is <code>cr, uid, *arguments, context</code>:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="nd">@api.model</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_value</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c"># can be called as</span>
<span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">a_value</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd><dt><a href="#openerp.api.multi" class="internal reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a></dt>
                        <dd>
                            <p>the method is exposed as taking a list of ids (possibly empty), its &quot;old API&quot; signature is <code>cr, uid, ids, *arguments, context</code>:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="nd">@api.multi</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_value</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c"># can be called as</span>
<span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="p">[</span><span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">],</span> <span class="n">a_value</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                            </div>
                        </dd>
                    </dl>
                    <p>Because new-style APIs tend to return recordsets and old-style APIs tend to return lists of ids, there is also a decorator managing this:</p>
                    <dl><dt><a href="#openerp.api.returns" class="internal reference" title="openerp.api.returns"><code class="py xref py-func">returns()</code></a></dt>
                        <dd>
                            <p>the function is assumed to return a recordset, the first parameter should be the name of the recordset's model or <code>self</code> (for the current model).</p>
                            <p>No effect if the method is called in new API style, but transforms the recordset into a list of ids when called from the old API style:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@api.multi</span>
<span class="gp">... </span><span class="nd">@api.returns</span><span class="p">(</span><span class="s">&#39;self&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">self</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_style_model</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;a.model&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">()</span>
<span class="go">a.model(1, 2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_style_model</span> <span class="o">=</span> <span class="n">pool</span><span class="p">[</span><span class="s">&#39;a.model&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
                            </div>
                        </dd>
                    </dl>
                </section>
                <section id="model-reference"><i id="reference-orm-model"></i>
                    <h2>Model Reference</h2>
                    <section class="code-class">
                        <h6 id="openerp.models.Model"><code><em >class </em>openerp.models.Model(<em>pool</em>, <em>cr</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L6082" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Main super-class for regular database-persisted OpenERP models.</p>
                        <p>OpenERP models are created by inheriting from this class:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="k">class</span> <span class="nc">user</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
                        </div>
                        <p>The system will later instantiate the class once per database (on which the class' module is installed).</p>
                        <h3>Structural attributes</h3>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._name"><code>_name</code></h6>
                            <p>business object name, in dot-notation (in module namespace)</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._rec_name"><code>_rec_name</code></h6>
                            <p>Alternative field to use as name, used by osv’s name_get() (default: <code>'name'</code>)</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._inherit"><code>_inherit</code></h6>
                            <ul>
                                <li>If <a href="#openerp.models.Model._name" class="internal alert-link reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> is set, names of parent models to inherit from. Can be a <code>str</code>                                    if inheriting from a single parent</li>
                                <li>If <a href="#openerp.models.Model._name" class="internal alert-link reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> is unset, name of a single model to extend in-place
                                </li>
                            </ul>
                            <p>See <a href="#reference-orm-inheritance" class="internal alert-link reference"><span >
Наследование и расширение</span></a>.</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._order"><code>_order</code></h6>
                            <p>Ordering field when searching without an ordering specified (default:
                                <code>'id'</code>)</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body">str</div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._auto"><code>_auto</code></h6>
                            <p>Whether a database table should be created (default: <code>True</code>)</p>
                            <p>If set to <code>False</code>, override <code class="py py-meth xref">init()</code> to create the database table
                            </p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._table"><code>_table</code></h6>
                            <p>Name of the table backing the model created when
                                <a href="#openerp.models.Model._auto" class="internal alert-link reference" title="openerp.models.Model._auto"><code class="py xref py-attr">_auto</code></a>, automatically generated by default.
                            </p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._inherits"><code>_inherits</code></h6>
                            <p>dictionary mapping the _name of the parent business objects to the names of the corresponding foreign key fields to use:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;a.model&#39;</span><span class="p">:</span> <span class="s">&#39;a_field_id&#39;</span><span class="p">,</span>
    <span class="s">&#39;b.model&#39;</span><span class="p">:</span> <span class="s">&#39;b_field_id&#39;</span>
<span class="p">}</span>
</pre></div>
                            </div>
                            <p>implements composition-based inheritance: the new model exposes all the fields of the <a href="#openerp.models.Model._inherits" class="internal alert-link reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a>-ed
                                model but stores none of them: the values themselves remain stored on the linked record.
                            </p>
                            <div role="alert" class="alert-warning alert">
                                <p class="alert-title">Warning</p>
                                <p>if the same field is defined on multiple
                                    <a href="#openerp.models.Model._inherits" class="internal alert-link reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a>-ed</p>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._constraints"><code>_constraints</code></h6>
                            <p>list of <code>(constraint_function, message, fields)</code> defining Python constraints. The fields list is indicative</p>
                            <div class="deprecated">
                                <p><span class="versionmodified">Deprecated since version 8.0: </span>use <a href="#openerp.api.constrains" class="internal alert-link reference" title="openerp.api.constrains"><code class="py xref py-func">constrains()</code></a></p>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._sql_constraints"><code>_sql_constraints</code></h6>
                            <p>list of <code>(name, sql_definition, message)</code> triples defining SQL constraints to execute when generating the backing table</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._parent_store"><code>_parent_store</code></h6>
                            <p>Alongside <a href="#openerp.models.Model.parent_left" class="internal alert-link reference" title="openerp.models.Model.parent_left"><code class="py xref py-attr">parent_left</code></a> and <a href="#openerp.models.Model.parent_right"
                                    class="internal alert-link reference" title="openerp.models.Model.parent_right"><code class="py xref py-attr">parent_right</code></a>, sets up a
                                <a href="http://en.wikipedia.org/wiki/Nested_set_model" class="external reference alert-link">nested set</a> to enable fast hierarchical queries on the records of the current model (default: <code>False</code>)</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body">bool</div>
                                </div>
                            </div>
                        </section>
                        <h3>CRUD</h3>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.create"><code>create(<em>vals</em>) → record<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L4049" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Creates a new record for the model.</p>
                            <p>The new record is initialized using the values from <code>vals</code> and if necessary those from
                                <a href="#openerp.models.Model.default_get" class="internal alert-link reference" title="openerp.models.Model.default_get"><code class="py py-meth xref">default_get()</code></a>.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>vals</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><em >dict</em></a>) --
                                        <p>values for the model's fields, as a dictionary:</p>
                                        <div class="highlight-python">
                                            <div class="highlight"><pre>{&#39;field_name&#39;: field_value, ...}
</pre></div>
                                        </div>
                                        <p>see <a href="#openerp.models.Model.write" class="internal alert-link reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a> for details</p>
                                    </div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">new record created</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Raises</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>AccessError</strong> --
                                                <ul>
                                                    <li>if user has no create rights on the requested object</li>
                                                    <li>if user tries to bypass access rules for create on the requested object</li>
                                                </ul>
                                            </li>
                                            <li><strong>ValidateError</strong> -- if user tries to enter invalid value for a field that is not in selection</li>
                                            <li><strong>UserError</strong> -- if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.browse"><code>browse([<em>ids</em>]) → records<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5268" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns a recordset for the ids provided as parameter in the current environment.
                            </p>
                            <p>Can take no ids, a single id or a sequence of ids.</p>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.unlink"><code>unlink()<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L3585" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Deletes the records of the current set</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Raises</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>AccessError</strong> --
                                                <ul>
                                                    <li>if user has no unlink rights on the requested object</li>
                                                    <li>if user tries to bypass access rules for unlink on the requested object</li>
                                                </ul>
                                            </li>
                                            <li><strong>UserError</strong> -- if the record is default property for other records</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.write"><code>write(<em>vals</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L3681" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Updates all records in the current set with the provided values.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>vals</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><em >dict</em></a>) --
                                        <p>fields to update and the value to set on them e.g:</p>
                                        <div class="highlight-python">
                                            <div class="highlight"><pre><span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="s">&quot;Qux&quot;</span><span class="p">}</span>
</pre></div>
                                        </div>
                                        <p>will set the field <code>foo</code> to <code>1</code> and the field <code>bar</code> to
                                            <code>&quot;Qux&quot;</code> if those are valid (otherwise it will trigger an error).</p>
                                    </div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Raises</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>AccessError</strong> --
                                                <ul>
                                                    <li>if user has no write rights on the requested object</li>
                                                    <li>if user tries to bypass access rules for write on the requested object</li>
                                                </ul>
                                            </li>
                                            <li><strong>ValidateError</strong> -- if user tries to enter invalid value for a field that is not in selection</li>
                                            <li><strong>UserError</strong> -- if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <ul>
                                <li>For numeric fields (<a href="#openerp.fields.Integer" class="internal alert-link reference" title="openerp.fields.Integer"><code class="py xref py-class">Integer</code></a>,
                                    <a href="#openerp.fields.Float" class="internal alert-link reference" title="openerp.fields.Float"><code class="py xref py-class">Float</code></a>) the value should be of the corresponding type</li>
                                <li>For <a href="#openerp.fields.Boolean" class="internal alert-link reference" title="openerp.fields.Boolean"><code class="py xref py-class">Boolean</code></a>, the value should be a
                                    <a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><code >bool</code></a></li>
                                <li>For <a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">Selection</code></a>, the value should match the selection values (generally
                                    <a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><code >str</code></a>, sometimes
                                    <a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>)</li>
                                <li>For <a href="#openerp.fields.Many2one" class="internal alert-link reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>, the value should be the database identifier of the record
                                    to set</li>
                                <li>
                                    <p>Other non-relational fields use a string for value</p>
                                    <div role="alert" class="alert-danger alert">
                                        <p class="alert-title">Danger</p>
                                        <p>for historical and compatibility reasons,
                                            <a href="#openerp.fields.Date" class="internal alert-link reference" title="openerp.fields.Date"><code class="py xref py-class">Date</code></a> and
                                            <a href="#openerp.fields.Datetime" class="internal alert-link reference" title="openerp.fields.Datetime"><code class="py xref py-class">Datetime</code></a> fields use strings as values (written and read) rather
                                            than
                                            <a href="https://docs.python.org/2/library/datetime.html#datetime.date" class="external reference alert-link" title="(in Python v2.7)"><code class="py xref py-class">date</code></a> or
                                            <a href="https://docs.python.org/2/library/datetime.html#datetime.datetime" class="external reference alert-link" title="(in Python v2.7)"><code class="py xref py-class">datetime</code></a>. These date strings
                                            are UTC-only and formatted according to
                                            <code class="py-const py xref">openerp.tools.misc.DEFAULT_SERVER_DATE_FORMAT</code> and
                                            <code class="py-const py xref">openerp.tools.misc.DEFAULT_SERVER_DATETIME_FORMAT</code></p>
                                    </div>
                                </li>
                                <li>
                                    <p id="openerp-models-relationals-format"><a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a> and
                                        <a href="#openerp.fields.Many2many" class="internal alert-link reference" title="openerp.fields.Many2many"><code class="py xref py-class">Many2many</code></a> use a special &quot;commands&quot; format to manipulate
                                        the set of records stored in/associated with the field.</p>
                                    <p>This format is a list of triplets executed sequentially, where each triplet is a command to execute on the set of records. Not all commands apply in all situations. Possible commands are:</p>
                                    <dl><dt><code >(0, _, values)</code></dt>
                                        <dd>adds a new record created from the provided <code>value</code> dict.</dd><dt><code >(1, id, values)</code></dt>
                                        <dd>updates an existing record of id <code>id</code> with the values in
                                            <code>values</code>. Can not be used in <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt><code >(2, id, _)</code></dt>
                                        <dd>removes the record of id <code>id</code> from the set, then deletes it (from the database). Can not be used in
                                            <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt><code >(3, id, _)</code></dt>
                                        <dd>removes the record of id <code>id</code> from the set, but does not delete it. Can not be used on
                                            <a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>. Can not be used in
                                            <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt><code >(4, id, _)</code></dt>
                                        <dd>adds an existing record of id <code>id</code> to the set. Can not be used on <a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>.</dd><dt><code >(5, _, _)</code></dt>
                                        <dd>removes all records from the set, equivalent to using the command <code>3</code> on every record explicitly. Can not be used on
                                            <a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>. Can not be used in
                                            <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt><code >(6, _, ids)</code></dt>
                                        <dd>replaces all existing records in the set by the <code>ids</code> list, equivalent to using the command <code>5</code> followed by a command
                                            <code>4</code> for each <code>id</code> in <code>ids</code>. Can not be used on
                                            <a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>.</dd>
                                    </dl>
                                    <div role="alert" class="alert-info alert">
                                        <p class="alert-title">Note</p>
                                        <p>Values marked as <code>_</code> in the list above are ignored and can be anything, generally <code>0</code> or <code>False</code>.</p>
                                    </div>
                                </li>
                            </ul>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.read"><code>read([<em>fields</em>])<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L3148" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Reads the requested fields for the records in <code>self</code>, low-level/RPC method. In Python code, prefer
                                <a href="#openerp.models.Model.browse" class="internal alert-link reference" title="openerp.models.Model.browse"><code class="py py-meth xref">browse()</code></a>.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>fields</strong> -- list of field names to return (default is all fields)</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">a list of dictionaries mapping field names to their values, with one dictionary per record</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Raises AccessError</div>
                                    <div class="code-field-body">if user has no read rights on some of the given records
                                    </div>
                                </div>
                            </div>
                        </section>
                        <h3>Research</h3>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.search"><code>search(<em>args[, offset=0][, limit=None][, order=None][, count=False]</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1627" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Searches for records based on the <code>args</code>
                                <a href="#reference-orm-domains" class="internal alert-link reference"><span >search domain</span></a>.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>args</strong> -- <a href="#reference-orm-domains" class="internal alert-link reference"><span >A search domain</span></a>. Use an empty list to match all records.</li>
                                            <li><strong>offset</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><em >int</em></a>) -- number of results to ignore (default:
                                                none)
                                            </li>
                                            <li><strong>limit</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><em >int</em></a>) -- maximum number of records to return
                                                (default: all)
                                            </li>
                                            <li><strong>order</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><em >str</em></a>) -- sort string</li>
                                            <li><strong>count</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><em >bool</em></a>) -- if True, only counts and returns
                                                the number of matching records (default: False)</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">at most <code>limit</code> records matching the search criteria</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Raises AccessError</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li>if user tries to bypass access rules for read on the requested object.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.search_count"><code>search_count(<em>args</em>) → int<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1616" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns the number of records in the current model matching <a href="#reference-orm-domains" class="internal alert-link reference"><span >the
provided domain</span></a>.</p>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.name_search"><code>name_search(<em>name=''</em>, <em>args=None</em>, <em>operator='ilike'</em>, <em>limit=100</em>) → records<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1702" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Search for records that have a display name matching the given
                                <code>name</code> pattern when compared with the given <code>operator</code>, while also matching the optional search domain (<code>args</code>).</p>
                            <p>This is used for example to provide suggestions based on a partial value for a relational field. Sometimes be seen as the inverse function of
                                <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a>, but it is not guaranteed to be.</p>
                            <p>This method is equivalent to calling <a href="#openerp.models.Model.search" class="internal alert-link reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> with a search domain based
                                on <code>display_name</code> and then <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a> on the result
                                of the search.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>name</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><em >str</em></a>) -- the name pattern to match</li>
                                            <li><strong>args</strong> (<a href="https://docs.python.org/2/library/functions.html#list" class="external reference alert-link" title="(in Python v2.7)"><em >list</em></a>) -- optional search domain (see <a href="#openerp.models.Model.search"
                                                    class="internal alert-link reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> for syntax), specifying further restrictions</li>
                                            <li><strong>operator</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><em >str</em></a>) -- domain operator for matching <code>name</code>,
                                                such as
                                                <code>'like'</code> or <code>'='</code>.</li>
                                            <li><strong>limit</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><em >int</em></a>) -- optional max number of records to return</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Return type</div>
                                    <div class="code-field-body"><a href="https://docs.python.org/2/library/functions.html#list" class="external reference alert-link" title="(in Python v2.7)">list</a></div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">list of pairs <code>(id, text_repr)</code> for all matching records.</div>
                                </div>
                            </div>
                        </section>
                        <h3>Recordset operations</h3>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.ids"><code>ids</code></h6>
                            <p>List of actual record ids in this recordset (ignores placeholder ids for records to create)</p>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.ensure_one"><code>ensure_one()<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5301" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Verifies that the current recorset holds a single record. Raises an exception otherwise.</p>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.exists"><code>exists() → records<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L4883" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns the subset of records in <code>self</code> that exist, and marks deleted records as such in cache. It can be used as a test on records:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
                            </div>
                            <p>By convention, new records are returned as existing.</p>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.filtered"><code>filtered(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5439" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Select the records in <code>self</code> such that <code>func(rec)</code> is true, and return them as a recordset.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>func</strong> -- a function or a dot-separated sequence of field names</div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.sorted"><code>sorted(<em>key=None</em>, <em>reverse=False</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5450" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return the recordset <code>self</code> ordered by <code>key</code>.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>key</strong> -- either a function of one argument that returns a comparison key for each record, or <code>None</code>, in which case records are ordered according the default model's order</li>
                                            <li><strong>reverse</strong> -- if <code>True</code>, return the result in reverse order</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.mapped"><code>mapped(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5413" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Apply <code>func</code> on all records in <code>self</code>, and return the result as a list or a recordset (if <code>func</code> return recordsets). In the latter case, the order of the returned recordset is arbitrary.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>func</strong> -- a function or a dot-separated sequence of field names</div>
                                </div>
                            </div>
                        </section>
                        <h3>Environment swapping</h3>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.sudo"><code>sudo([<em>user=SUPERUSER</em>])<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5322" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns a new version of this recordset attached to the provided user.
                            </p>
                            <p>By default this returns a [UNKNOWN NODE title_reference] recordset, where access control and record rules are bypassed.</p>
                            <div role="alert" class="alert-info alert">
                                <p class="alert-title">Note</p>
                                <p>Using [UNKNOWN NODE title_reference] could cause data access to cross the boundaries of record rules, possibly mixing records that are meant to be isolated (e.g. records from different companies in multi-company environments).
                                </p>
                                <p>It may lead to un-intuitive results in methods which select one record among many - for example getting the default company, or selecting a Bill of Materials.</p>
                            </div>
                            <div role="alert" class="alert-info alert">
                                <p class="alert-title">Note</p>
                                <p>Because the record rules and access control will have to be re-evaluated, the new recordset will not benefit from the current environment's data cache, so later data access may incur extra delays while re-fetching from
                                    the database.</p>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.with_context"><code>with_context(<em>[context][, **overrides]</em>) → records<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5349" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns a new version of this recordset attached to an extended context.
                            </p>
                            <p>The extended context is either the provided <code>context</code> in which
                                <code>overrides</code> are merged or the <em>current</em> context in which
                                <code>overrides</code> are merged e.g.:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="c"># current context is {&#39;key1&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">({},</span> <span class="n">key2</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># -&gt; r2._context is {&#39;key2&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">key2</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># -&gt; r2._context is {&#39;key1&#39;: True, &#39;key2&#39;: True}</span>
</pre></div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.with_env"><code>with_env(<em>env</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L5309" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns a new version of this recordset attached to the provided environment
                            </p>
                            <div role="alert" class="alert-warning alert">
                                <p class="alert-title">Warning</p>
                                <p>The new environment will not benefit from the current environment's data cache, so later data access may incur extra delays while re-fetching from the database.</p>
                            </div>
                            <div class="code-fields"></div>
                        </section>
                        <h3>Fields and views querying</h3>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.fields_get"><code>fields_get(<em>[fields][, attributes]</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L3063" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return the definition of each field.</p>
                            <p>The returned value is a dictionary (indiced by field name) of dictionaries. The _inherits'd fields are included. The string, help, and selection (if present) attributes are translated.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>allfields</strong> -- list of fields to document, all if empty or not provided</li>
                                            <li><strong>attributes</strong> -- list of description attributes to return for each field, all if empty or not provided</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.fields_view_get"><code>fields_view_get([<em>view_id | view_type='form'</em>])<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1475" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Get the detailed composition of the requested view like fields, model, view architecture</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>view_id</strong> -- id of the view or None</li>
                                            <li><strong>view_type</strong> -- type of the view to return if view_id is None ('form', 'tree', ...)</li>
                                            <li><strong>toolbar</strong> -- true to include contextual actions</li>
                                            <li><strong>submenu</strong> -- deprecated</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">dictionary describing the composition of the requested view (including inherited views and extensions)</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Raises</div>
                                    <div class="code-field-body">
                                        <ul>
                                            <li><strong>AttributeError</strong> --
                                                <ul>
                                                    <li>if the inherited view has unknown position to work with other than 'before', 'after', 'inside', 'replace'</li>
                                                    <li>if some tag other than 'position' is found in parent view</li>
                                                </ul>
                                            </li>
                                            <li><strong>Invalid ArchitectureError</strong> -- if there is view type other than form, tree, calendar, search etc defined on the structure</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <h3>???</h3>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.default_get"><code>default_get(<em>fields</em>) → default_values<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1283" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return default values for the fields in <code>fields_list</code>. Default values are determined by the context, user defaults, and the model itself.
                            </p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>fields_list</strong> -- a list of field names</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">a dictionary mapping each field name to its corresponding default value, if it has one.</div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.copy"><code>copy(<em>default=None</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L4864" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Duplicate record with given id updating it with default values</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>default</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><em >dict</em></a>) -- dictionary of field values to override in
                                        the original values of the copied record, e.g: <code>{'field_name': overridden_value, ...}</code></div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">new record</div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.name_get"><code>name_get() → [(id, name), ...]<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1658" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns a textual representation for the records in <code>self</code>. By default this is the value of the <code>display_name</code> field.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">list of pairs <code>(id, text_repr)</code> for each records</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Return type</div>
                                    <div class="code-field-body">list(tuple)</div>
                                </div>
                            </div>
                        </section>
                        <section class="code-method">
                            <h6 id="openerp.models.Model.name_create"><code>name_create(<em>name</em>) → record<a href="https://github.com/odoo/odoo/blob/8.0/openerp/models.py#L1680" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Create a new record by calling <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a> with only one value provided:
                                the display name of the new record.</p>
                            <p>The new record will be initialized with any default values applicable to this model, or provided through the context. The usual behavior of
                                <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a> applies.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>name</strong> -- display name of the record to create</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Return type</div>
                                    <div class="code-field-body"><a href="https://docs.python.org/2/library/functions.html#tuple" class="external reference alert-link" title="(in Python v2.7)">tuple</a></div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">the <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a> pair value of the created record</div>
                                </div>
                            </div>
                        </section>
                        <h3 id="reference-orm-model-automatic">Automatic fields</h3>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.id"><code>id</code></h6>
                            <p>Identifier <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">field</code></a></p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model._log_access"><code>_log_access</code></h6>
                            <p>Whether log access fields (<code>create_date</code>, <code>write_uid</code>, ...) should be generated (default: <code>True</code>)</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.create_date"><code>create_date</code></h6>
                            <p>Date at which the record was created</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><code class="py xref py-class">Datetime</code></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.create_uid"><code>create_uid</code></h6>
                            <p>Relational field to the user who created the record</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><code>res.users</code></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.write_date"><code>write_date</code></h6>
                            <p>Date at which the record was last modified</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><code class="py xref py-class">Datetime</code></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.write_uid"><code>write_uid</code></h6>
                            <p>Relational field to the last user who modified the record</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><code>res.users</code></div>
                                </div>
                            </div>
                        </section>
                        <h3>Reserved field names</h3>
                        <p>A few field names are reserved for pre-defined behaviors beyond that of automated fields. They should be defined on a model when the related behavior is desired:</p>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.name"><code>name</code></h6>
                            <p>default value for <a href="#openerp.models.Model._rec_name" class="internal alert-link reference" title="openerp.models.Model._rec_name"><code class="py xref py-attr">_rec_name</code></a>, used to display records in context
                                where a representative &quot;naming&quot; is necessary.
                            </p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><a href="#openerp.fields.Char" class="internal alert-link reference" title="openerp.fields.Char"><code class="py xref py-class">Char</code></a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.active"><code>active</code></h6>
                            <p>toggles the global visibility of the record, if <code>active</code> is set to
                                <code>False</code> the record is invisible in most searches and listing</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><a href="#openerp.fields.Boolean" class="internal alert-link reference" title="openerp.fields.Boolean"><code class="py xref py-class">Boolean</code></a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.sequence"><code>sequence</code></h6>
                            <p>Alterable ordering criteria, allows drag-and-drop reordering of models in list views</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><a href="#openerp.fields.Integer" class="internal alert-link reference" title="openerp.fields.Integer"><code class="py xref py-class">Integer</code></a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.state"><code>state</code></h6>
                            <p>lifecycle stages of the object, used by the <code>states</code> attribute on
                                <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">fields</code></a></p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">Selection</code></a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.parent_id"><code>parent_id</code></h6>
                            <p>used to order records in a tree structure and enables the <code>child_of</code> operator in domains</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Type</div>
                                    <div class="code-field-body"><a href="#openerp.fields.Many2one" class="internal alert-link reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.parent_left"><code>parent_left</code></h6>
                            <p>used with <a href="#openerp.models.Model._parent_store" class="internal alert-link reference" title="openerp.models.Model._parent_store"><code class="py xref py-attr">_parent_store</code></a>, allows faster tree structure access</p>
                        </section>
                        <section class="code-attribute">
                            <h6 id="openerp.models.Model.parent_right"><code>parent_right</code></h6>
                            <p>see <a href="#openerp.models.Model.parent_left" class="internal alert-link reference" title="openerp.models.Model.parent_left"><code class="py xref py-attr">parent_left</code></a></p>
                        </section>
                    </section>
                </section>
                <section id="module-openerp.api"><i id="method-decorators"></i><i id="reference-orm-decorators"></i>
                    <h2>Method decorators</h2>
                    <p>This module provides the elements for managing two different API styles, namely the &quot;traditional&quot; and &quot;record&quot; styles.</p>
                    <p>In the &quot;traditional&quot; style, parameters like the database cursor, user id, context dictionary and record ids (usually denoted as <code>cr</code>, <code>uid</code>,
                        <code>context</code>, <code>ids</code>) are passed explicitly to all methods. In the &quot;record&quot; style, those parameters are hidden into model instances, which gives it a more object-oriented feel.</p>
                    <p>For instance, the statements:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MODEL</span><span class="p">)</span>
<span class="n">ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">DOMAIN</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span>
<span class="n">model</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">VALUES</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                    </div>
                    <p>may also be written as:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="c"># cr, uid, context wrapped in env</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="n">MODEL</span><span class="p">]</span>                  <span class="c"># retrieve an instance of MODEL</span>
<span class="n">recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">DOMAIN</span><span class="p">)</span>         <span class="c"># search returns a recordset</span>
<span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>                    <span class="c"># iterate over the records</span>
    <span class="k">print</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span>
<span class="n">recs</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">VALUES</span><span class="p">)</span>                  <span class="c"># update all records in recs</span>
</pre></div>
                    </div>
                    <p>Methods written in the &quot;traditional&quot; style are automatically decorated, following some heuristics based on parameter names.</p>
                    <section class="code-function">
                        <h6 id="openerp.api.multi"><code>openerp.api.multi(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L378" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorate a record-style method where <code>self</code> is a recordset. The method typically defines an operation on records. Such a method:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.multi</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
                        </div>
                        <p>may be called in both record and traditional styles, like:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="c"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                        </div>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.model"><code>openerp.api.model(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L349" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorate a record-style method where <code>self</code> is a recordset, but its contents is not relevant, only the model is. Such a method:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.model</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
                        </div>
                        <p>may be called in both record and traditional styles, like:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="c"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                        </div>
                        <p>Notice that no <code>ids</code> are passed to the method in the traditional style.</p>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.depends"><code>openerp.api.depends(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L199" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Return a decorator that specifies the field dependencies of a &quot;compute&quot; method (for new-style function fields). Each argument must be a string that consists in a dot-separated sequence of field names:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="n">pname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_compute_pname&#39;</span><span class="p">)</span>

<span class="nd">@api.one</span>
<span class="nd">@api.depends</span><span class="p">(</span><span class="s">&#39;partner_id.name&#39;</span><span class="p">,</span> <span class="s">&#39;partner_id.is_company&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_pname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">is_company</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span>
</pre></div>
                        </div>
                        <p>One may also pass a single function as argument. In that case, the dependencies are given by calling the function with the field's model.</p>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.constrains"><code>openerp.api.constrains(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L144" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorates a constraint checker. Each argument must be a field name used in the check:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.one</span>
<span class="nd">@api.constrains</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;description&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_check_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&quot;Fields name and description must be different&quot;</span><span class="p">)</span>
</pre></div>
                        </div>
                        <p>Invoked on the records on which one of the named fields has been modified.</p>
                        <p>Should raise <code class="py xref py-class">ValidationError</code> if the validation failed.</p>
                        <div role="alert" class="alert-warning alert">
                            <p class="alert-title">Warning</p>
                            <p><code>@constrains</code> only supports simple field names, dotted names (fields of relational fields e.g. <code>partner_id.customer</code>) are not supported and will be ignored</p>
                        </div>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.onchange"><code>openerp.api.onchange(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L168" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Return a decorator to decorate an onchange method for given fields. Each argument must be a field name:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.onchange</span><span class="p">(</span><span class="s">&#39;partner_id&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_onchange_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Dear </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
                        </div>
                        <p>In the form views where the field appears, the method will be called when one of the given fields is modified. The method is invoked on a pseudo-record that contains the values present in the form. Field assignments on that record
                            are automatically sent back to the client.</p>
                        <p>The method may return a dictionary for changing field domains and pop up a warning message, like in the old API:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="k">return</span> <span class="p">{</span>
    <span class="s">&#39;domain&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;other_id&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="n">partner_id</span><span class="p">)]},</span>
    <span class="s">&#39;warning&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">&quot;Warning&quot;</span><span class="p">,</span> <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&quot;What is this?&quot;</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
                        </div>
                        <div role="alert" class="alert-warning alert">
                            <p class="alert-title">Warning</p>
                            <p><code>@onchange</code> only supports simple field names, dotted names (fields of relational fields e.g. <code>partner_id.tz</code>) are not supported and will be ignored</p>
                        </div>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.returns"><code>openerp.api.returns(<em>model</em>, <em>downgrade=None</em>, <em>upgrade=None</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L224" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Return a decorator for methods that return instances of <code>model</code>.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>model</strong> -- a model name, or <code>'self'</code> for the current model</li>
                                        <li><strong>downgrade</strong> -- a function <code>downgrade(self, value, *args, **kwargs)</code> to convert the record-style <code>value</code> to a traditional-style output</li>
                                        <li><strong>upgrade</strong> -- a function <code>upgrade(self, value, *args, **kwargs)</code> to convert the traditional-style <code>value</code> to a record-style output</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The arguments <code>self</code>, <code>*args</code> and <code>**kwargs</code> are the ones passed to the method in the record-style.</p>
                        <p>The decorator adapts the method output to the api style: <code>id</code>, <code>ids</code> or
                            <code>False</code> for the traditional style, and recordset for the record style:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@model</span>
<span class="nd">@returns</span><span class="p">(</span><span class="s">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">find_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="o">...</span>     <span class="c"># return some record</span>

<span class="c"># output depends on call style: traditional vs record style</span>
<span class="n">partner_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

<span class="c"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">partner_record</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
                        </div>
                        <p>Note that the decorated method must satisfy that convention.</p>
                        <p>Those decorators are automatically <em>inherited</em>: a method that overrides a decorated existing method will be decorated with the same
                            <code>@returns(model)</code>.</p>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.one"><code>openerp.api.one(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L405" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorate a record-style method where <code>self</code> is expected to be a singleton instance. The decorated method automatically loops on records, and makes a list with the results. In case the method is decorated with
                            <a href="#openerp.api.returns" class="internal alert-link reference" title="openerp.api.returns"><code class="py xref py-func">returns()</code></a>, it concatenates the resulting instances. Such a method:
                        </p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.one</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
                        </div>
                        <p>may be called in both record and traditional styles, like:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="c"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">names</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">names</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
                        </div>
                        <div class="deprecated">
                            <p><span class="versionmodified">Deprecated since version 9.0: </span><a href="#openerp.api.one" class="internal alert-link reference" title="openerp.api.one"><code class="py xref py-func">one()</code></a> often makes the code
                                less clear and behaves in ways developers and readers may not expect.</p>
                            <p>It is strongly recommended to use <a href="#openerp.api.multi" class="internal alert-link reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a> and either iterate on the <code>self</code> recordset
                                or ensure that the recordset is a single record with <a href="#openerp.models.Model.ensure_one" class="internal alert-link reference" title="openerp.models.Model.ensure_one"><code class="py py-meth xref">ensure_one()</code></a>.</p>
                        </div>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.v7"><code>openerp.api.v7(<em>method_v7</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L598" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorate a method that supports the old-style api only. A new-style api may be provided by redefining a method with the same name and decorated with
                            <a href="#openerp.api.v8" class="internal alert-link reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@api.v8</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
                        </div>
                        <p>Special care must be taken if one method calls the other one, because the method may be overridden! In that case, one should call the method from the current class (say <code>MyClass</code>), for instance:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c"># Beware: records.foo() may call an overriding of foo()</span>
    <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</pre></div>
                        </div>
                        <p>Note that the wrapper method uses the docstring of the first method.</p>
                    </section>
                    <section class="code-function">
                        <h6 id="openerp.api.v8"><code>openerp.api.v8(<em>method_v8</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/api.py#L634" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Decorate a method that supports the new-style api only. An old-style api may be provided by redefining a method with the same name and decorated with
                            <a href="#openerp.api.v7" class="internal alert-link reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a>:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="nd">@api.v8</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@api.v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
                        </div>
                        <p>Note that the wrapper method uses the docstring of the first method.</p>
                    </section>
                </section>
                <section id="fields"><i id="reference-orm-fields"></i>
                    <h2>Поля</h2></section>
                <section id="basic-fields"><i id="reference-orm-fields-basic"></i>
                    <h3>Основные поля</h3>
                    <section class="code-class">
                        <h6 id="openerp.fields.Field"><code><em >class </em>openerp.fields.Field(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L124" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Дескриптор поля содержит описание поля, управляет доступом и передачей прав соотвествующим полям в записи. Следующие атрибуты могут быть назначены при объявлении (instanciating ) поля:</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Параметры</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>string</strong> -- метка поля, видимая пользователями (string); если не задана, ORM возьмет имя поля из класса (прописными буквами).</li>
                                        <li><strong>help</strong> -- всплывающая надпись которую видим пользователь, при наведении курсора на поле (string)</li>
                                        <li><strong>readonly</strong> -- имеет ли поле атрибут "только для чтения" (boolean, по умолчания <code>False</code>)</li>
                                        <li><strong>required</strong> -- требуется ли заполнять значение поля (boolean, по умолчания <code>False</code>)</li>
                                        <li><strong>index</strong> --  индексируется ли поле в базе данных (boolean, по умолчания <code>False</code>)</li>
                                        <li><strong>default</strong> -- значение поля по умолчанию; это либо статическое значение, либо функция принимает набор записей и возвращает  значение</li>
                                        <li><strong>states</strong> -- словарь сопоставления состояния значений в  списки UI пар атрибут-значение; возможные атрибуты это: 'readonly', 'required', 'invisible'. Замечание: Любые статусы основанные на сосотяниях требуют <code>state</code>
                                          поля должны быть доступны на стороне UI клиента. This is typically done by including it in the relevant views, possibly made invisible if not relevant for the end-user.
                                        </li>
                                        <li><strong>groups</strong> -- comma-separated list of group xml ids (string); this restricts the field access to the users of the given groups only</li>
                                        <li><strong>copy</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><em >bool</em></a>) -- whether the field value should be copied
                                            when the record is duplicated (default: <code>True</code> for normal fields, <code>False</code> for
                                            <code>one2many</code> and computed fields, including property fields and related fields)</li>
                                        <li><strong>oldname</strong> (<a href="https://docs.python.org/2/library/string.html#module-string" class="external reference alert-link" title="(in Python v2.7)"><em >string</em></a>) -- the previous name of this field,
                                            so that ORM can rename it automatically at migration</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <h4 id="field-computed">Computed fields</h4>
                        <p>One can define a field whose value is computed instead of simply being read from the database. The attributes that are specific to computed fields are given below. To define such a field, simply provide a value for the attribute
                            <code>compute</code>.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>compute</strong> -- name of a method that computes the field</li>
                                        <li><strong>inverse</strong> -- name of a method that inverses the field (optional)</li>
                                        <li><strong>search</strong> -- name of a method that implement search on the field (optional)</li>
                                        <li><strong>store</strong> -- whether the field is stored in database (boolean, by default <code>False</code> on computed fields)</li>
                                        <li><strong>compute_sudo</strong> -- whether the field should be recomputed as superuser to bypass access rights (boolean, by default <code>False</code>)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The methods given for <code>compute</code>, <code>inverse</code> and <code>search</code> are model methods. Their signature is shown in the following example:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="n">upper</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s">&#39;_compute_upper&#39;</span><span class="p">,</span>
                    <span class="n">inverse</span><span class="o">=</span><span class="s">&#39;_inverse_upper&#39;</span><span class="p">,</span>
                    <span class="n">search</span><span class="o">=</span><span class="s">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="nd">@api.depends</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">rec</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">_inverse_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">upper</span> <span class="k">else</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
                        </div>
                        <p>The compute method has to assign the field on all records of the invoked recordset. The decorator <a href="#openerp.api.depends" class="internal alert-link reference" title="openerp.api.depends"><code class="py py-meth xref">openerp.api.depends()</code></a>                            must be applied on the compute method to specify the field dependencies; those dependencies are used to determine when to recompute the field; recomputation is automatic and guarantees cache/database consistency. Note that
                            the same method can be used for several fields, you simply have to assign all the given fields in the method; the method will be invoked once for all those fields.</p>
                        <p>By default, a computed field is not stored to the database, and is computed on-the-fly. Adding the attribute <code>store=True</code> will store the field's values in the database. The advantage of a stored field is that searching
                            on that field is done by the database itself. The disadvantage is that it requires database updates when the field must be recomputed.</p>
                        <p>The inverse method, as its name says, does the inverse of the compute method: the invoked records have a value for the field, and you must apply the necessary changes on the field dependencies such that the computation gives the
                            expected value. Note that a computed field without an inverse method is readonly by default.</p>
                        <p>The search method is invoked when processing domains before doing an actual search on the model. It must return a domain equivalent to the condition: <code>field operator value</code>.</p>
                        <h4 id="field-related">Related fields</h4>
                        <p>The value of a related field is given by following a sequence of relational fields and reading a field on the reached model. The complete sequence of fields to traverse is specified by the attribute</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body"><strong>related</strong> -- sequence of field names</div>
                            </div>
                        </div>
                        <p>Some field attributes are automatically copied from the source field if they are not redefined: <code>string</code>, <code>help</code>, <code>readonly</code>, <code>required</code> (only if all fields in the sequence are required),
                            <code>groups</code>, <code>digits</code>, <code>size</code>,
                            <code>translate</code>, <code>sanitize</code>, <code>selection</code>, <code>comodel_name</code>, <code>domain</code>,
                            <code>context</code>. All semantic-free attributes are copied from the source field.
                        </p>
                        <p>By default, the values of related fields are not stored to the database. Add the attribute <code>store=True</code> to make it stored, just like computed fields. Related fields are automatically recomputed when their dependencies
                            are modified.
                        </p>
                        <h4 id="field-company-dependent">Company-dependent fields</h4>
                        <p>Formerly known as 'property' fields, the value of those fields depends on the company. In other words, users that belong to different companies may see different values for the field on a given record.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body"><strong>company_dependent</strong> -- whether the field is company-dependent (boolean)</div>
                            </div>
                        </div>
                        <h4 id="field-incremental-definition">Incremental definition</h4>
                        <p>A field is defined as class attribute on a model class. If the model is extended (see <a href="#openerp.models.Model" class="internal alert-link reference" title="openerp.models.Model"><code class="py xref py-class">Model</code></a>),
                            one can also extend the field definition by redefining a field with the same name and same type on the subclass. In that case, the attributes of the field are taken from the parent class and overridden by the ones given in
                            subclasses.
                        </p>
                        <p>For instance, the second class below only adds a tooltip on the field
                            <code>state</code>:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="k">class</span> <span class="nc">First</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">([</span><span class="o">...</span><span class="p">],</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s">&quot;Blah blah blah&quot;</span><span class="p">)</span>
</pre></div>
                        </div>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Char"><code><em >class </em>openerp.fields.Char(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1126" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._String</code></p>
                        <p>Basic string field, can be length-limited, usually displayed as a single-line string in clients</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>size</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><em >int</em></a>) -- the maximum size of values stored for that
                                            field
                                        </li>
                                        <li><strong>translate</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><em >bool</em></a>) -- whether the values of this field
                                            can be translated</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Boolean"><code><em >class </em>openerp.fields.Boolean(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1017" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Integer"><code><em >class </em>openerp.fields.Integer(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1029" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Float"><code><em >class </em>openerp.fields.Float(<em>string=None</em>, <em>digits=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1061" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                        <p>The precision digits are given by the attribute</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body"><strong>digits</strong> -- a pair (total, decimal), or a function taking a database cursor and returning a pair (total, decimal)</div>
                            </div>
                        </div>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Text"><code><em >class </em>openerp.fields.Text(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1152" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._String</code></p>
                        <p>Very similar to <a href="#openerp.fields.Char" class="internal alert-link reference" title="openerp.fields.Char"><code class="py xref py-class">Char</code></a> but used for longer contents, does not have a size and usually displayed
                            as a multiline text box.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body"><strong>translate</strong> -- whether the value of this field can be translated</div>
                            </div>
                        </div>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Selection"><code><em >class </em>openerp.fields.Selection(<em>selection=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1329" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>selection</strong> -- specifies the possible values for this field. It is given as either a list of pairs (<code>value</code>, <code>string</code>), or a model method, or a method name.</li>
                                        <li><strong>selection_add</strong> -- provides an extension of the selection in the case of an overridden field. It is a list of pairs (<code>value</code>, <code>string</code>).</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The attribute <code>selection</code> is mandatory except in the case of
                            <a href="#field-related" class="internal alert-link reference"><span >related fields</span></a> or <a href="#field-incremental-definition" class="internal alert-link reference"><span >field extensions</span></a>.</p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Html"><code><em >class </em>openerp.fields.Html(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1165" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._String</code></p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Date"><code><em >class </em>openerp.fields.Date(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1188" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Date.context_today"><code><em >static </em>context_today(<em>record</em>, <em>timestamp=None</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1198" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return the current date as seen in the client's timezone in a format fit for date fields. This method may be used to compute default values.
                            </p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>timestamp</strong> (<a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)"><em >datetime</em></a>) -- optional datetime value
                                        to use instead of the current date and time (must be a datetime, regular dates can't be converted between timezones.)</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Return type</div>
                                    <div class="code-field-body"><a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)">str</a></div>
                                </div>
                            </div>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Date.from_string"><code><em >static </em>from_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1221" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Convert an ORM <code>value</code> into a <code class="py xref py-class">date</code> value.</p>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Date.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1229" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Convert a <code class="py xref py-class">date</code> value into the format expected by the ORM.</p>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Date.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1191" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return the current day in the format expected by the ORM. This function may be used to compute default values.</p>
                        </section>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Datetime"><code><em >class </em>openerp.fields.Datetime(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1250" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Datetime.context_timestamp"><code><em >static </em>context_timestamp(<em>record</em>, <em>timestamp</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1260" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Returns the given timestamp converted to the client's timezone. This method is <em>not</em> meant for use as a _defaults initializer, because datetime fields are automatically converted upon display on client side. For _defaults
                                you
                                <code class="py py-meth xref">fields.datetime.now()</code> should be used instead.</p>
                            <div class="code-fields">
                                <div class="code-field">
                                    <div class="code-field-name">Parameters</div>
                                    <div class="code-field-body"><strong>timestamp</strong> (<a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)"><em >datetime</em></a>) -- naive datetime value (expressed
                                        in UTC) to be converted to the client timezone</div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Return type</div>
                                    <div class="code-field-body"><a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)">datetime</a></div>
                                </div>
                                <div class="code-field">
                                    <div class="code-field-name">Returns</div>
                                    <div class="code-field-body">timestamp converted to timezone-aware datetime in context timezone
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Datetime.from_string"><code><em >static </em>from_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1287" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Convert an ORM <code>value</code> into a <code class="py xref py-class">datetime</code> value.</p>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Datetime.now"><code><em >static </em>now(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1253" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Return the current day and time in the format expected by the ORM. This function may be used to compute default values.</p>
                        </section>
                        <section class="code-staticmethod">
                            <h6 id="openerp.fields.Datetime.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1297" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                            <p>Convert a <code class="py xref py-class">datetime</code> value into the format expected by the ORM.</p>
                        </section>
                    </section>
                </section>
                <section id="relational-fields"><i id="reference-orm-fields-relational"></i>
                    <h3>Relational fields</h3>
                    <section class="code-class">
                        <h6 id="openerp.fields.Many2one"><code><em >class </em>openerp.fields.Many2one(<em>comodel_name=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1518" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._Relational</code></p>
                        <p>The value of such a field is a recordset of size 0 (no record) or 1 (a single record).</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>comodel_name</strong> -- name of the target model (string)</li>
                                        <li><strong>domain</strong> -- an optional domain to set on candidate values on the client side (domain or string)</li>
                                        <li><strong>context</strong> -- an optional context to use on the client side when handling that field (dictionary)</li>
                                        <li><strong>ondelete</strong> -- what to do when the referred record is deleted; possible values are: <code>'set null'</code>, <code>'restrict'</code>, <code>'cascade'</code></li>
                                        <li><strong>auto_join</strong> -- whether JOINs are generated upon search through that field (boolean, by default <code>False</code>)</li>
                                        <li><strong>delegate</strong> -- set it to <code>True</code> to make fields of the target model accessible from the current model (corresponds to <code>_inherits</code>)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The attribute <code>comodel_name</code> is mandatory except in the case of related fields or field extensions.</p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.One2many"><code><em >class </em>openerp.fields.One2many(<em>comodel_name=None</em>, <em>inverse_name=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1736" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._RelationalMulti</code></p>
                        <p>One2many field; the value of such a field is the recordset of all the records in <code>comodel_name</code> such that the field <code>inverse_name</code> is equal to the current record.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>comodel_name</strong> -- name of the target model (string)</li>
                                        <li><strong>inverse_name</strong> -- name of the inverse <code>Many2one</code> field in
                                            <code>comodel_name</code> (string)</li>
                                        <li><strong>domain</strong> -- an optional domain to set on candidate values on the client side (domain or string)</li>
                                        <li><strong>context</strong> -- an optional context to use on the client side when handling that field (dictionary)</li>
                                        <li><strong>auto_join</strong> -- whether JOINs are generated upon search through that field (boolean, by default <code>False</code>)</li>
                                        <li><strong>limit</strong> -- optional limit to use upon read (integer)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The attributes <code>comodel_name</code> and <code>inverse_name</code> are mandatory except in the case of related fields or field extensions.</p>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Many2many"><code><em >class </em>openerp.fields.Many2many(<em>comodel_name=None</em>, <em>relation=None</em>, <em>column1=None</em>, <em>column2=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1797" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <code class="py xref py-class">openerp.fields._RelationalMulti</code></p>
                        <p>Many2many field; the value of such a field is the recordset.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body"><strong>comodel_name</strong> -- name of the target model (string)</div>
                            </div>
                        </div>
                        <p>The attribute <code>comodel_name</code> is mandatory except in the case of related fields or field extensions.</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>relation</strong> -- optional name of the table that stores the relation in the database (string)</li>
                                        <li><strong>column1</strong> -- optional name of the column referring to &quot;these&quot; records in the table <code>relation</code> (string)</li>
                                        <li><strong>column2</strong> -- optional name of the column referring to &quot;those&quot; records in the table <code>relation</code> (string)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <p>The attributes <code>relation</code>, <code>column1</code> and <code>column2</code> are optional. If not given, names are automatically generated from model names, provided
                            <code>model_name</code> and <code>comodel_name</code> are different!</p>
                        <div class="code-fields">
                            <div class="code-field">
                                <div class="code-field-name">Parameters</div>
                                <div class="code-field-body">
                                    <ul>
                                        <li><strong>domain</strong> -- an optional domain to set on candidate values on the client side (domain or string)</li>
                                        <li><strong>context</strong> -- an optional context to use on the client side when handling that field (dictionary)</li>
                                        <li><strong>limit</strong> -- optional limit to use upon read (integer)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="code-class">
                        <h6 id="openerp.fields.Reference"><code><em >class </em>openerp.fields.Reference(<em>selection=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/8.0/openerp/fields.py#L1433" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6>
                        <p>Bases: <a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">openerp.fields.Selection</code></a></p>
                    </section>
                </section>
                <section id="inheritance-and-extension"><i id="reference-orm-inheritance"></i>
                    <h2>Наследование и расширение</h2>
                    <p> Odoo обеспечивает три различных механизма для расширения моделей данных по модульному принципу:</p>
                    <ul>
                        <li>создание новой модели данных из уже существующей, добавляя новую информацию в копию, но оставляя исходный модуль как есть</li>
                        <li>расширение модели данных, определенную в других модулях, заменяя предыдующую версию</li>
                        <li>делегировании некоторых полей моделей данных к записям, которые они содержат</li>
                    </ul><img src="../_images/inheritance_methods1.png" class="img-responsive center-block"></section>
                <section id="classical-inheritance">
                    <h3>Классическое наследование</h3>
                    <p>При использовании <a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a> и
                        <a href="#openerp.models.Model._name" class="internal reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> атрибутов вместе, Odoo соаздем новую модель, используя уже существующую (при использовании
                        <a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a>) в качестве базиса. Новая модель наследует все поля, методы и мета-информацию
                        (defaults &amp; al) от базисной модели данных.</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="k">class</span> <span class="nc">Inheritance0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;inheritance.0&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&quot;модель_данных_0&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;This is {} record {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Inheritance1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;inheritance.1&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s">&#39;inheritance.0&#39;</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s">&quot;модель_данных_1&quot;</span><span class="p">)</span>
</pre></div>
                    </div>
                    <p>и их использование:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre>        <span class="n">a</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;inheritance.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">})</span>
        <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;inheritance.1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">})</span>
        <span class="n">b</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
                    </div>
                    <p>даст следующий результат:</p>
                    <div class="highlight-text">
                        <div class="highlight"><pre>        Это модель_данных_0 запись A
        Это модель_данных_1 запись В
</pre></div>
                    </div>
                    <p>вторая модель данных унаследовала от первой метод проверки (<code>check</code>) и ее имя поля(<code>name</code>), но переопределила метод <code>call</code>, используя стандарный механизм
                        <a href="https://docs.python.org/2/tutorial/classes.html#tut-inheritance" class="external reference" title="(in Python v2.7)"><span class="std xref std-ref">наследования Python (Python inheritance)</span></a>.</p>
                </section>
                <section id="extension">
                    <h3>Расширение</h3>
                    <p>При использовании <a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a> но выйдя из
                        <a href="#openerp.models.Model._name" class="internal reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a>, новая модель данных заменит собой уже существующую, расширяя ее. Это полезно для
                        добавления новых полей или методов в существующие модели данных (созданные в других модулях), или их индивидуальной настройки (например, чтобы изменить их порядок сортировки по умолчанию):</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="k">class</span> <span class="nc">Extension0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;extension.0&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Extension1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s">&#39;extension.0&#39;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&quot;Extended&quot;</span><span class="p">)</span>
</pre></div>
                    </div>
                    <div class="highlight-python">
                        <div class="highlight"><pre>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;extension.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
                    </div>
                    <p>даст следующий результат:</p>
                    <div class="highlight-text">
                        <div class="highlight"><pre>        {&#39;name&#39;: &quot;A&quot;, &#39;description&#39;: &quot;Extended&quot;}
</pre></div>
                    </div>
                    <div role="alert" class="alert-info alert">
                        <p class="alert-title">Замечание</p>
                        <p>это так же выдаст различные <a href="#reference-orm-model-automatic" class="internal alert-link reference"><span >поля, созданные автоматически,</span></a> до тех пор пока они не будут отключены</p>
                    </div>
                </section>
                <section id="delegation">
                    <h3>Делегирование</h3>
                    <p>Третий механизм наследования обеспечивает большую гибкость (существует возможность изменения во врмемя выполнения) но требует больше мощностей: используя
                        <a href="#openerp.models.Model._inherits" class="internal reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a> модель данных <em>делегирует</em> поиск любого поля, не найденного в
                        текущей модели данных &quot;дочерним&quot; моделям данных. Делегирование осуществляется с помощью
                        <a href="#openerp.fields.Reference" class="internal reference" title="openerp.fields.Reference"><code class="py xref py-class">ссылочных (Reference)</code></a> полей автомтически установленных на родительской модели данных:
                    </p>
                    <div class="highlight-python">
                        <div class="highlight"><pre><span class="k">class</span> <span class="nc">Child0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;delegation.child0&#39;</span>

    <span class="n">field_0</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Child1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;delegation.child1&#39;</span>

    <span class="n">field_1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Delegating</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;delegation.parent&#39;</span>

    <span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;delegation.child0&#39;</span><span class="p">:</span> <span class="s">&#39;child0_id&#39;</span><span class="p">,</span>
        <span class="s">&#39;delegation.child1&#39;</span><span class="p">:</span> <span class="s">&#39;child1_id&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">child0_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s">&#39;delegation.child0&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s">&#39;cascade&#39;</span><span class="p">)</span>
    <span class="n">child1_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s">&#39;delegation.child1&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s">&#39;cascade&#39;</span><span class="p">)</span>
</pre></div>
                    </div>
                    <div class="highlight-python">
                        <div class="highlight"><pre>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;delegation.parent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
            <span class="s">&#39;child0_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;delegation.child0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;field_0&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s">&#39;child1_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;delegation.child1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s">&#39;field_1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">field_0</span>
        <span class="n">record</span><span class="o">.</span><span class="n">field_1</span>
</pre></div>
                    </div>
                    <p>даст результат:</p>
                    <div class="highlight-text">
                        <div class="highlight">
                          <pre>
                          0
                          1
                          </pre>
                        </div>
                    </div>
                    <p>есть возможность сделать запись прямо в делегированное поле:</p>
                    <div class="highlight-python">
                        <div class="highlight"><pre>        <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s">&#39;field_1&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</pre></div>
                    </div>
                    <div role="alert" class="alert-warning alert">
                        <p class="alert-title">Внимание</p>
                        <p>когда используете наследование через делегирование, методы <em>не</em> наследуются, только поля</p>
                    </div>
                </section>
                <section id="domains"><i id="reference-orm-domains"></i>
                    <h2>Домены</h2>
                    <p>Домен это список критериев, каждый критерий состоит из трех частей ( является либо <code>списоком</code> либо <code>кортеж</code>) of <code>(имя_поля, оператор, значение)</code> где:</p>
                    <dl><dt><code >имя_поля</code> (<code >str</code>)</dt>
                        <dd>имя поля текущей модели данных, или реляционная связь через поле вида <a href="#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a> используя указание
                            через точку к примеру:
                            <code>'street'</code> или <code>'partner_id.country'</code></dd><dt><code >оператор</code> (<code >str</code>)</dt>
                        <dd>
                            <p>оператор испольуземы для сравнения <code>имя поля</code> со <code>значением</code>. Допустимые операторы:</p>
                            <dl><dt><code >=</code></dt>
                                <dd>равно</dd>
                                <dt><code >!=</code></dt>
                                <dd>не равно</dd><dt>
                                  <code >&gt;</code></dt>
                                <dd>больше чем</dd>
                                <dt><code >&gt;=</code></dt>
                                <dd>больше чем или равно</dd>
                                <dt><code >&lt;</code></dt>
                                <dd>меньше чем</dd><dt><code >&lt;=</code></dt>
                                <dd>меньше чем или равно</dd>
                                <dt><code >=?</code></dt>
                                <dd>не задано или равно (возварщает true если <code>значение</code> является либо <code>None</code> либо
                                    <code>False</code>, в противном случае ведет себя как <code>=</code>)</dd>
                                <dt><code >=like</code></dt>
                                <dd>сопоставляет <code>имя_поля</code> с шаблоном <code>значения</code>. Подчеркивание
                                    <code>_</code> в шаблоне (сопоставлении) обозначает любой один символ; знак процента <code>%</code> соотвествует любой строке состоящей из нуля или более символов.</dd><dt><code >like</code></dt>
                                <dd>сопоставляет <code>ипя_поля</code> с шаблоном <code>%значения%</code>. Так же как
                                    <code>=like</code> но оборачивает <code>значение</code> в '%' перед сравнением</dd>
                                <dt><code >not like</code></dt>
                                <dd>не сопоставляет с шаблоном <code>%значения%</code></dd>
                                <dt><code >ilike</code></dt>
                                <dd>не чувтсвительный к регистру<code>like</code>
                                </dd><dt><code >not ilike</code></dt>
                                <dd>не чувтсвительный к регистру<code>not like</code>
                                </dd><dt><code >=ilike</code></dt>
                                <dd>не чувтсвительный к регистру<code>=like</code></dd>
                                <dt><code >in</code></dt>
                                <dd>равно любому из элементов <code>значения</code>, <code>значение</code> должно быть списком элементов</dd>
                                <dt><code >not in</code></dt>
                                <dd>не равно любому из элементов <code>value</code></dd>
                                <dt><code >child_of</code></dt>
                                <dd>
                                    <p>дочернее значение (потомок) <code>значения</code> записи.</p>
                                    <p>Принимает семантику модели данных во внимание (т.е. следует за реляционным полем названным
                                        <code class="py xref py-attr">_parent_name</code>).</p>
                                </dd>
                            </dl>
                        </dd><dt><code >значение</code></dt>
                        <dd>тип переменной, который должен быть сопоставим (через <code>оператор</code>) с названным полем
                        </dd>
                    </dl>
                    <p>Критерии домена могут быть объединены с помощью логических операторов в виде <em>префикса</em>:</p>
                    <dl><dt><code >'&amp;'</code></dt>
                        <dd>логическое <em>И</em>,операция по умолчанию для объединения критериев, следующих друг за другом. Arity 2 (испольузет следующие 2 кртерия или комбинации).</dd><dt><code >'|'</code></dt>
                        <dd>логическое <em>ИЛИ</em>, arity 2.</dd>
                        <dt><code >'!'</code></dt>
                        <dd>
                            <p>Логическое <em>НЕ</em>, arity 1.</p>
                            <div role="alert" class="alert-info aphorism alert">
                                <p class="alert-title">Замечание</p>
                                <p>Главным образом, чтобы свести на нет комбинации критериев</p>
                                <p>Индивидуальный критерий как правило, имеет отрицательную форму(например: <code>=</code> -&gt;
                                    <code>!=</code>, <code>&lt;</code> -&gt; <code>&gt;=</code>) что является более простым способом достичь нужного результат, чем отрицание положительных результатов .</p>
                            </div>
                        </dd>
                    </dl>
                    <div role="alert" class="admonition-example alert">
                        <p class="alert-title">Пример</p>
                        <p>Для поиска шаблона с именем <em>ABC</em>, из Бельгии или Германии, чей язык не английский:</p>
                        <div class="highlight-python">
                            <div class="highlight"><pre><span class="p">[(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="s">&#39;=&#39;</span><span class="p">,</span><span class="s">&#39;ABC&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s">&#39;language.code&#39;</span><span class="p">,</span><span class="s">&#39;!=&#39;</span><span class="p">,</span><span class="s">&#39;en_US&#39;</span><span class="p">),</span>
 <span class="s">&#39;|&#39;</span><span class="p">,(</span><span class="s">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s">&#39;=&#39;</span><span class="p">,</span><span class="s">&#39;be&#39;</span><span class="p">),</span>
     <span class="p">(</span><span class="s">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s">&#39;=&#39;</span><span class="p">,</span><span class="s">&#39;de&#39;</span><span class="p">)]</span>
</pre></div>
                        </div>
                        <p>Этот домен интерпретируется как:</p>
                        <div class="highlight-text">
                            <div class="highlight"><pre>    (name is &#39;ABC&#39;)
AND (language is NOT english)
AND (country is Belgium OR Germany)
</pre></div>
                        </div>
                    </div>
                </section>
                <section id="porting-from-the-old-api-to-the-new-api">
                    <h2>Porting from the old API to the new API</h2>
                    <ul>
                        <li>bare lists of ids are to be avoided in the new API, use recordsets instead</li>
                        <li>methods still written in the old API should be automatically bridged by the ORM, no need to switch to the old API, just call them as if they were a new API method. See <a href="#reference-orm-oldapi-bridging" class="internal reference"><span >Automatic bridging of old API methods</span></a>                            for more details.</li>
                        <li><a href="#openerp.models.Model.search" class="internal reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> returns a recordset, no point in e.g. browsing its result</li>
                        <li><code>fields.related</code> and <code>fields.function</code> are replaced by using a normal field type with either a <code>related=</code> or a <code>compute=</code> parameter</li>
                        <li><a href="#openerp.api.depends" class="internal reference" title="openerp.api.depends"><code class="py xref py-func">depends()</code></a> on <code>compute=</code> methods <strong>must be complete</strong>, it must list <strong>all</strong>                            the fields and sub-fields which the compute method uses. It is better to have too many dependencies (will recompute the field in cases where that is not needed) than not enough (will forget to recompute the field and then values
                            will be incorrect)</li>
                        <li><strong>remove</strong> all <code>onchange</code> methods on computed fields. Computed fields are automatically re-computed when one of their dependencies is changed, and that is used to auto-generate <code>onchange</code> by the
                            client
                        </li>
                        <li>the decorators <a href="#openerp.api.model" class="internal reference" title="openerp.api.model"><code class="py xref py-func">model()</code></a> and
                            <a href="#openerp.api.multi" class="internal reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a> are for bridging <em>when calling from the old API context</em>, for internal or pure new-api
                            (e.g. compute) they are useless</li>
                        <li>remove <code class="py xref py-attr">_default</code>, replace by <code>default=</code> parameter on corresponding fields</li>
                        <li>
                            <p>if a field's <code>string=</code> is the titlecased version of the field name:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s">&quot;Name&quot;</span><span class="p">)</span>
</pre></div>
                            </div>
                            <p>it is useless and should be removed</p>
                        </li>
                        <li>the <code>multi=</code> parameter does not do anything on new API fields use the same
                            <code>compute=</code> methods on all relevant fields for the same result</li>
                        <li>provide <code>compute=</code>, <code>inverse=</code> and <code>search=</code> methods by name (as a string), this makes them overridable (removes the need for an intermediate &quot;trampoline&quot; function)</li>
                        <li>double check that all fields and methods have different names, there is no warning in case of collision (because Python handles it before Odoo sees anything)
                        </li>
                        <li>the normal new-api import is <code>from openerp import fields, models</code>. If compatibility decorators are necessary, use <code>from openerp import api,
fields, models</code></li>
                        <li>avoid the <a href="#openerp.api.one" class="internal reference" title="openerp.api.one"><code class="py xref py-func">one()</code></a> decorator, it probably does not do what you expect</li>
                        <li>remove explicit definition of <a href="#openerp.models.Model.create_uid" class="internal reference" title="openerp.models.Model.create_uid"><code class="py xref py-attr">create_uid</code></a>,
                            <a href="#openerp.models.Model.create_date" class="internal reference" title="openerp.models.Model.create_date"><code class="py xref py-attr">create_date</code></a>,
                            <a href="#openerp.models.Model.write_uid" class="internal reference" title="openerp.models.Model.write_uid"><code class="py xref py-attr">write_uid</code></a> and
                            <a href="#openerp.models.Model.write_date" class="internal reference" title="openerp.models.Model.write_date"><code class="py xref py-attr">write_date</code></a> fields: they are now created as regular &quot;legitimate&quot;
                            fields, and can be read and written like any other field out-of-the-box</li>
                        <li>
                            <p>when straight conversion is impossible (semantics can not be bridged) or the &quot;old API&quot; version is not desirable and could be improved for the new API, it is possible to use completely different &quot;old API&quot;
                                and &quot;new API&quot; implementations for the same method name using <a href="#openerp.api.v7" class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a> and
                                <a href="#openerp.api.v8" class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>. The method should first be defined using the old-API style and decorated with <a href="#openerp.api.v7"
                                    class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a>, it should then be re-defined using the exact same name but the new-API style and decorated with <a href="#openerp.api.v8"
                                    class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>. Calls from an old-API context will be dispatched to the first implementation and calls from a new-API context will be dispatched
                                to the second implementation. One implementation can call (and frequently does) call the other by switching context.</p>
                            <div role="alert" class="alert-danger alert">
                                <p class="alert-title">Danger</p>
                                <p>using these decorators makes methods extremely difficult to override and harder to understand and document</p>
                            </div>
                        </li>
                        <li>
                            <p>uses of <code class="py xref py-attr">_columns</code> or
                                <code class="py xref py-attr">_all_columns</code> should be replaced by
                                <code class="py xref py-attr">_fields</code>, which provides access to instances of new-style <a href="#openerp.fields.Field" class="internal reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a>                                instances (rather than old-style
                                <code class="py xref py-class">openerp.osv.fields._column</code>).</p>
                            <p>Non-stored computed fields created using the new API style are <em>not</em> available in <code class="py xref py-attr">_columns</code> and can only be inspected through <code class="py xref py-attr">_fields</code></p>
                        </li>
                        <li>reassigning <code>self</code> in a method is probably unnecessary and may break translation introspection</li>
                        <li>
                            <p><code class="py xref py-class">Environment</code> objects rely on some threadlocal state, which has to be set up before using them. It is necessary to do so using the
                                <code class="py py-meth xref">openerp.api.Environment.manage()</code> context manager when trying to use the new API in contexts where it hasn't been set up yet, such as new threads or a Python interactive environment:</p>
                            <div class="highlight-python">
                                <div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openerp</span> <span class="kn">import</span> <span class="n">api</span><span class="p">,</span> <span class="n">modules</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">modules</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">RegistryManager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cr</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{})</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">environments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="o">.</span><span class="n">manage</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">env</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{})</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">env</span><span class="p">[</span><span class="s">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">res.partner(1,)</span>
</pre></div>
                            </div>
                        </li>
                    </ul>
                </section>
                <section id="automatic-bridging-of-old-api-methods"><i id="reference-orm-oldapi-bridging"></i>
                    <h3>Automatic bridging of old API methods</h3>
                    <p>When models are initialized, all methods are automatically scanned and bridged if they look like models declared in the old API style. This bridging makes them transparently callable from new-API-style methods.</p>
                    <p>Methods are matched as &quot;old-API style&quot; if their second positional parameter (after <code>self</code>) is called either <code>cr</code> or <code>cursor</code>. The system also recognizes the third positional parameter being
                        called
                        <code>uid</code> or <code>user</code> and the fourth being called <code>id</code> or <code>ids</code>. It also recognizes the presence of any parameter called <code>context</code>.</p>
                    <p>When calling such methods from a new API context, the system will automatically fill matched parameters from the current
                        <code class="py xref py-class">Environment</code> (for <code class="py xref py-attr">cr</code>,
                        <code class="py xref py-attr">user</code> and
                        <code class="py xref py-attr">context</code>) or the current recordset (for <code>id</code> and <code>ids</code>).</p>
                    <p>In the rare cases where it is necessary, the bridging can be customized by decorating the old-style method:</p>
                    <ul>
                        <li>disabling it entirely, by decorating a method with
                            <code class="py xref py-func">noguess()</code> there will be no bridging and methods will be called the exact same way from the new and old API styles</li>
                        <li>
                            <p>defining the bridge explicitly, this is mostly for methods which are matched incorrectly (because parameters are named in unexpected ways):</p>
                            <dl><dt><code class="py xref py-func">cr()</code></dt>
                                <dd>will automatically prepend the current cursor to explicitly provided parameters, positionally</dd><dt><code class="py xref py-func">cr_uid()</code></dt>
                                <dd>will automatically prepend the current cursor and user's id to explictly provided parameters</dd><dt><code class="py xref py-func">cr_uid_ids()</code></dt>
                                <dd>will automatically prepend the current cursor, user's id and recordset's ids to explicitly provided parameters</dd><dt><code class="py xref py-func">cr_uid_id()</code></dt>
                                <dd>
                                    <p>will loop over the current recordset and call the method once for each record, prepending the current cursor, user's id and record's id to explicitly provided parameters.</p>
                                    <div role="alert" class="alert-danger alert">
                                        <p class="alert-title">Danger</p>
                                        <p>the result of this wrapper is <em>always a list</em> when calling from a new-API context</p>
                                    </div>
                                </dd>
                            </dl>
                            <p>All of these methods have a <code>_context</code>-suffixed version (e.g. <code class="py xref py-func">cr_uid_context()</code>) which also passes the current context <em>by keyword</em>.</p>
                        </li>
                        <li>dual implementations using <a href="#openerp.api.v7" class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a> and
                            <a href="#openerp.api.v8" class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a> will be ignored as they provide their own &quot;bridging&quot;</li>
                    </ul>
                </section>

            </article>
        </div>

        <div id="mask"></div>
    </main>

    <div class="floating_action_container">
        <a id="floating_action" class="ripple" href="#">
            <i class="mdi-action-explore"></i>
        </a>
        <div id="floating_action_menu">
            <span class="bubble"></span>
            <ul class="list-group content">
                <li class="list-group-item ripple"><a>Cras justo odio</a></li>
                <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
                <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
                <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
                <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
            </ul>
        </div>
    </div>
</body>

</html>
